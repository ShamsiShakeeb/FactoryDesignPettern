<h1> My Report </h1>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<div>
    <table id="studentList">
        <tr>
            <th>
                Name
            </th>
            <th>
                Email
            </th>
            <th>
                Address
            </th>
            <th>
                Cgpa
            </th>
        </tr>

    </table>
</div>


<script>

    $.ajax({
        url: 'https://localhost:44375/api/StudentApi/List',
        type: 'GET',
        dataType: 'json',

        success: function (data, textStatus, xhr) {

            var table = document.getElementById("studentList");
            var list = data.result;
            for (var i = 0; i < list.length; i++) {

                var row = table.insertRow();
                var cell = row.insertCell();
                cell.innerHTML = list[i].name;
                cell = row.insertCell();
                cell.innerHTML = list[i].email;
                cell = row.insertCell();
                cell.innerHTML = list[i].address;
                cell = row.insertCell();
                cell.innerHTML = list[i].cgpa;
                cell = row.insertCell();
                let deleteTag = `<button onclick='Delete(${list[i].id})'> Delete </button>`;
                cell = row.insertCell();
                cell.innerHTML = deleteTag;
                let updateTag = `<a href='StudentUpdate.html?id=${list[i].id}'> Update </a>`;
                cell = row.insertCell();
                cell.innerHTML = updateTag;
                let detailsTag = `<a href='StudentDetails.html?id=${list[i].id}'> Details </a>`;
                cell = row.insertCell();
                cell.innerHTML = detailsTag;
            }
        },
        error: function (data, textStatus, xhr) {
            alert("Something Went Wrong");
        }


    });

    function Delete(id) {
        if (confirm("Are You Sure Want to Delete this Row")) {
            $.ajax({
                url: 'https://localhost:44375/api/StudentApi/Delete?id=' + id,
                type: 'GET',
                dataType: 'json',
                success: function (data, textStatus, xhr) {
                    alert(data.message);
                    location.reload();
                },

                error: function (data, textStatus, xhr) {
                    alert("Something Went Wrong");
                }


            });
        }

    }

</script>