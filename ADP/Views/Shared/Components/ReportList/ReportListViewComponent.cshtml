
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>



<table id="reportList">

    <th>
        Path
    </th>
    <th>
        Api Url
    </th>
    <th>
        Report Name
    </th>


</table>
<br>
@*<a href=@await Component.InvokeAsync("ReportCreate")>Create New</a>*@
<br>


<script>

    $.ajax({
        url: 'https://localhost:44375/api/Report/List',
        type: 'GET',
        dataType: 'json',

        success: function (data, textStatus, xhr) {

            var table = document.getElementById("reportList");
            var list = data.result;
            for (var i = 0; i < list.length; i++) {

                var row = table.insertRow();
                var cell = row.insertCell();
                cell.innerHTML = list[i].path;
                cell = row.insertCell();
                cell.innerHTML = list[i].apiUrl;
                cell = row.insertCell();
                cell.innerHTML = list[i].reportName;
                cell = row.insertCell();
                let deleteTag = `<button onclick='Delete(${list[i].id})'> Delete </button>`;
                cell = row.insertCell();
                cell.innerHTML = deleteTag;
                let updateTag = `<a href='https://localhost:44375/api/Report/Update?id=${list[i].id}'> Update </a>`;
                cell = row.insertCell();
                cell.innerHTML = updateTag;
                let detailsTag = `<a href='https://localhost:44375/api/Report/DetailsView?id=${list[i].id}'> Details </a>`;
                cell = row.insertCell();
                cell.innerHTML = detailsTag;
            }
        },
        error: function (data, textStatus, xhr) {
            alert("Something Went Wrong");
        }


    });

    function Delete(id) {
        if (confirm("Are You Sure Want to Delete this Row")) {
            $.ajax({
                url: 'https://localhost:44375/api/Report/Delete?id=' + id,
                type: 'GET',
                dataType: 'json',
                success: function (data, textStatus, xhr) {
                    alert(data.message);
                    location.reload();
                },

                error: function (data, textStatus, xhr) {
                    alert("Something Went Wrong");
                }


            });
        }

    }

</script>
