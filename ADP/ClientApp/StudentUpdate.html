<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body>


    <b> Name: </b> <input type="text" id="name"> <br />
    <b> Email: </b> <input type="email" id="email"> <br />
    <b> Address: </b> <input type="textarea" id="address"> <br />
    <b> CGPA: </b> <input type="text" id="cgpa"> <br />
    <input type="button" value="update" onclick="Update()"> <br />

    <a href="file:///C:/Users/BS483/Desktop/Student%20CRUD/StudentList.html"> Back to List</a>

    <script>

        const params = new URLSearchParams(window.location.search)
        var id = params.get('id');

        $.ajax({
            url: 'https://localhost:44375/api/StudentApi/Details/' + id,
            type: 'GET',
            dataType: 'json',
            success: function (data, textStatus, xhr) {
                var model = data.result;
                document.getElementById("name").value = model.name;
                document.getElementById("email").value = model.email;
                document.getElementById("address").value = model.address;
                document.getElementById("cgpa").value = model.cgpa;
            },
            error: function (data, textStatus, xhr) {
                alert("Something Went Wrong");
            }
        });

        function Update() {

            var model = {

                name: document.getElementById("name").value,
                email: document.getElementById("email").value,
                address: document.getElementById("address").value,
                cgpa: parseFloat(document.getElementById("cgpa").value)
            };


            $.ajax({
                url: 'https://localhost:44375/api/StudentApi/Update/' + id,
                type: 'POST',
                dataType: 'json',
                data:model,
                success: function (data, textStatus, xhr) {
                   alert(data.message);
                   location.replace("file:///C:/Users/BS483/Desktop/Student%20CRUD/StudentList.html");

                },
                error: function (data, textStatus, xhr) {
                    alert("Something Went Wrong");
                }
            });
        }

    </script>


</body>

</html>